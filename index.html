<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Find the Best Songz for any artist!</title>

<link rel="stylesheet" href="stylesheet.css" type="text/css" />
<script type="text/javascript" src='http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js'></script>

<script type="text/javascript">
$(document).ready(function(){
	var query;
		$('#button1').click(function(){
			search=$("#query").val();
			
			search_url="http://www.gorankem.com:4000/api/v1/search/results/"+search+".js?callback=?";
			//extract the id from search
			$.getJSON(search_url,function(json){
				$.each(json,function(i,result){
					if (this['position']=="1")
				    {
					query=this['search-result']['id'];
					//get top tracks from the artist
					var url='http://gorankem.com:4000/api/v1/artist/tracks/'+query+'.js?callback=?';

					$.getJSON(url,function(json){
						$("#results").text("")
						$.each(json.tracks,function(i,track){
					   		$("#results").append('<p>'+track.rank+': '+track.title+'</p>');
						});
					});
				var img_url='http://gorankem.com:4000/api/v1/artist/image2/'+query+'.js?callback=?';
					$.getJSON(img_url,function(json){
						$.each(json.image,function(i,img){
					   		$("#results").prepend('<p><img src='+img.url+' /></p>');
						});
					});
					
					
					}
				});
			});
		
			
	});
	var query;
		$('#button2').click(function(){
			query=$("#query").val();

	});
	
});

//
/*	$.getJSON(theUrl + "?callback=?",null,
	    function(data) {
		

		  $.each(data, function() {
		    $("#song-list").append('<li>'+data.tracks.rank+'</li>');
		//'<li id="' + this.tracks['rank'] + '"><h2 class="song-title"><a href="#" title="'+this.tracks['title']+'">'+this.tracks['title']+'</a></h2><div class="song-content">'+ this.tracks['value'] + ' points.</div><!-- /.song-content --></li>'
		  });
		var songList=document.getElementById("song-list");
		alert(this);  
		//songList.appendChild(items);
	
	    }
	);

var theUrl="http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist=The Beatles&api_key=67cdab0ced66f1fcd971fc1bef514ff0&format=json&callback=?";

	$.getJSON(theUrl, function(data) {
 	if (data.artist==null)
 	{
 	alert("you didnt freakin do it right!!")
 	}
 	else
 	{
		var body = document.getElementById("index");
	
              $.each(data.artist.image, function(i,img){
            	
            	var image=document.createElement('img');
            	image.setAttribute('src', img['#text']);
            	image.setAttribute('id', i+' - '+img['size']);
            	body.appendChild(image);
            	("image size: "+ this['size'] + "  image url: " + this['#text']);
            	
              });
              var shortbio=document.createElement('div');
              shortbio.innerHTML=(data.artist.bio.summary);
              body.appendChild(shortbio);
              
              var br=document.createElement('br');
              
              
              body.appendChild(br);
              body.appendChild(br);

              var header=document.createElement('hr');
              body.appendChild(header);

              var longbio=document.createElement('div');
              longbio.innerHTML=(data.artist.bio.content);
              body.appendChild(longbio);
              
              
			return this;
	};
    });
*/

</script>
<!--[if IE]>
	<script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
<!--[if lte IE 7]>
	<script src="js/IE8.js" type="text/javascript"></script><![endif]-->
<!--[if lt IE 7]>

	<link rel="stylesheet" type="text/css" media="all" href="css/ie6.css"/><![endif]-->
<script type="text/javascript">
 var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-22336211-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body id="index" class="home" >

<header id="banner" class="body">
	<h1>BESTSONGZ <strong>Find the songz you were meant to hear!</strong></h1>
	
</header><!-- /#banner -->	

<aside id="featured" class="body"><article>
	<figure>
		
	</figure>
	<hgroup>

			<input type="text" id="query" /><button id="button1">search</button><br />
			<div id="results">

			</div>
	</hgroup>
	

</article></aside><!-- /#featured -->

<section id="content" class="body">
	<ol id="song-list" class="">
	

	</ol><!-- /#song-list -->
</section><!-- /#content -->



<footer id="footer-content" class="body">
	<address id="about" class="vcard body">
		<span class="primary">
			<strong><a href="#" class="fn url">Best Songz</a></strong>

			<span class="role">GoRankem</span>
		</span><!-- /.primary -->


		<span class="bio">Best Songz brings the fan sentiment to you, allowing you to find the best songz from any artist</span>

	</address><!-- /#about -->
	<p>2011 <a href="http://bestsongz.com">BestSongz</a></p>
</footer><!-- /#footer-content -->

</body>
</html>


